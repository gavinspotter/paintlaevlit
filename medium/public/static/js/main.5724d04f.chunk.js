(this.webpackJsonppaintclient=this.webpackJsonppaintclient||[]).push([[0],{14:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n(1),s=n.n(r),i=n(15),o=n.n(i),l=(n(32),n(5)),j=n(7),u=n(2),d=n.n(u),b=n(3),p=n(13),O=(n(34),function(e){return e.to?Object(c.jsx)(j.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(c.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}),h=function(e){var t="input"===e.element?Object(c.jsx)("input",{name:e.name,ref:e.valRef,type:e.type,defaultValue:e.dv}):Object(c.jsx)("textarea",{rows:e.rows||3,ref:e.valRef,name:e.name});return Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:e.label})," ",Object(c.jsx)("br",{}),t]})},x=n(25),m=n(48),v=(n(40),function(e){var t=Object(c.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(c.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(c.jsx)("h2",{children:e.header})}),Object(c.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(c.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(c.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return o.a.createPortal(t,document.getElementById("modal-hook"))}),f=function(e){return Object(c.jsx)(m.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(c.jsx)(v,Object(x.a)({},e))})},g=function(e){return Object(c.jsx)(f,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(c.jsx)(O,{onClick:e.onClear,children:" okay "}),children:Object(c.jsx)("p",{children:e.error})})},k=(n(41),function(e){return Object(c.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(c.jsx)("div",{className:"lds-dual-ring"})})}),w=Object(r.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}}),_=n(4),y=function(){var e=Object(r.useState)(!1),t=Object(_.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(_.a)(c,2),i=s[0],o=s[1],l=Object(r.useRef)([]),j=Object(r.useCallback)(function(){var e=Object(b.a)(d.a.mark((function e(t){var n,c,r,s,i,j,u=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",c=u.length>2&&void 0!==u[2]?u[2]:null,r=u.length>3&&void 0!==u[3]?u[3]:{},a(!0),s=new AbortController,l.current.push(s),e.prev=6,e.next=9,fetch(t,{method:n,body:c,headers:r,signal:s.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(j=e.sent,l.current=l.current.filter((function(e){return e!==s})),i.ok){e.next=16;break}throw new Error(j.message);case 16:return a(!1),e.abrupt("return",j);case 20:throw e.prev=20,e.t0=e.catch(6),o(e.t0.message),a(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){return function(){l.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:i,sendRequest:j,clearError:function(){o(null)}}},C=(n(42),n(14),function(){var e=Object(r.useContext)(w),t=Object(p.a)(),n=t.register,a=t.handleSubmit,i=y(),o=i.isLoading,j=i.error,u=i.sendRequest,x=i.clearError,m=Object(l.g)(),v=function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u("http://paintsaver.herokuapp.com/api/paints","POST",JSON.stringify({paintname:n.paintname,paintcode:n.paintcode,storecode:n.storecode,paintbrand:n.paintbrand,base:n.base,creator:e.userId}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token});case 3:m.push("/paint/new"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(g,{error:j,onClear:x}),Object(c.jsxs)("div",{className:"newpaint__card",children:[Object(c.jsx)("h2",{children:"save paint"}),Object(c.jsxs)("form",{onSubmit:a(v),children:[o&&Object(c.jsx)(k,{asOverlay:!0}),Object(c.jsx)(h,{name:"paintname",valRef:n,label:"name",element:"input"}),Object(c.jsx)(h,{name:"paintcode",valRef:n,label:"paint code",element:"input"}),Object(c.jsx)(h,{name:"paintbrand",valRef:n,label:"brand",element:"input"}),Object(c.jsx)(h,{name:"base",valRef:n,label:"base",element:"input"}),Object(c.jsx)(h,{name:"storecode",valRef:n,label:"store code",element:"input"}),Object(c.jsx)(O,{children:" submit "})]})]})]})}),N=(n(43),function(e){return Object(c.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}),S=function(e){var t=y(),n=t.isLoading,a=t.error,i=t.sendRequest,o=t.clearError,l=Object(r.useState)(!1),j=Object(_.a)(l,2),u=j[0],p=j[1],h=function(){p(!1)},x=function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!1),t.prev=1,t.next=4,i("".concat("http://paintsaver.herokuapp.com/api","/paints/").concat(e.id),"DELETE");case 4:e.onDelete(e.id),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(g,{error:a,onClear:o}),Object(c.jsx)(f,{show:u,onCancel:h,header:"are you sure?",footer:Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(O,{onClick:h,children:"cancel"}),Object(c.jsx)(O,{onClick:x,children:"delete"})]}),children:"this cant be undone are you sure?"}),Object(c.jsx)("li",{className:"paint-list-item",children:Object(c.jsxs)(N,{children:[n&&Object(c.jsx)(k,{asOverlay:!0}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:e.paintname}),Object(c.jsx)("div",{children:e.paintcode}),Object(c.jsx)("div",{children:e.paintbrand}),Object(c.jsx)("div",{children:e.base}),Object(c.jsx)("div",{children:e.storecode})]}),Object(c.jsx)(O,{to:"/paints/".concat(e.id),children:" edit "}),Object(c.jsx)(O,{onClick:function(){p(!0)},children:" delete "})]})})]})},E=(n(44),function(e){return 0===e.items.length?Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:" no paints found "}),Object(c.jsx)(O,{to:"/paints/new",children:" new "})]}):Object(c.jsx)("ul",{className:"paint-list",children:e.items.map((function(t){return Object(c.jsx)(S,{id:t.id,paintname:t.paintname,paintcode:t.paintcode,paintbrand:t.paintbrand,base:t.base,storecode:t.storecode,onDelete:e.onDelete},t.id)}))})}),R=function(){var e=Object(r.useState)(),t=Object(_.a)(e,2),n=t[0],a=t[1],i=y(),o=i.isLoading,j=i.error,u=i.sendRequest,p=i.clearError,O=Object(l.h)().userId;Object(r.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("".concat("http://paintsaver.herokuapp.com/api","/paints/user/").concat(O));case 3:t=e.sent,a(t.paints),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[u,O]);return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(g,{error:j,onClear:p}),o&&Object(c.jsx)("div",{className:"center",children:Object(c.jsx)(k,{})}),!o&&n&&Object(c.jsx)(E,{items:n,onDelete:function(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})},I=function(){var e=Object(r.useContext)(w),t=Object(l.h)().paintId,n=Object(r.useState)(),a=Object(_.a)(n,2),i=a[0],o=a[1],j=Object(r.useState)(),u=Object(_.a)(j,2),x=u[0],m=u[1],v=Object(r.useState)(),f=Object(_.a)(v,2),C=f[0],S=f[1],E=Object(r.useState)(),R=Object(_.a)(E,2),I=R[0],D=R[1],T=Object(r.useState)(),L=Object(_.a)(T,2),F=L[0],q=L[1],J=Object(p.a)(),P=J.register,B=J.handleSubmit,A=y(),z=A.isLoading,G=A.error,H=A.sendRequest,M=A.clearError,V=Object(l.g)();Object(r.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H("".concat("http://paintsaver.herokuapp.com/api","/paints/").concat(t));case 3:n=e.sent,o(n.paint.paintname),m(n.paint.paintcode),S(n.paint.paintbrand),D(n.paint.base),q(n.paint.storecode),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[H,t]);var K=function(){var n=Object(b.a)(d.a.mark((function n(a){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,H("".concat("http://paintsaver.herokuapp.com/api","/paints/").concat(t),"PATCH",JSON.stringify({paintname:a.paintname,paintcode:a.paintcode,paintbrand:a.paintbrand,base:a.base,storecode:a.storecode}),{"Content-Type":"application/json"});case 3:V.push("/"+e.userId+"/paints"),n.next=8;break;case 6:n.prev=6,n.t0=n.catch(0);case 8:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}();return z?Object(c.jsx)("div",{children:Object(c.jsx)(k,{})}):i||G?Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(g,{error:G,onClear:M}),!z&&i&&Object(c.jsx)(N,{children:Object(c.jsxs)("form",{onSubmit:B(K),children:[Object(c.jsx)(h,{element:"input",name:"paintname",valRef:P,label:"name",dv:i}),Object(c.jsx)(h,{element:"input",name:"paintcode",valRef:P,label:"paint code",dv:x}),Object(c.jsx)(h,{element:"input",name:"paintbrand",valRef:P,label:"brand",dv:C}),Object(c.jsx)(h,{element:"input",name:"base",valRef:P,label:"base",dv:I}),Object(c.jsx)(h,{element:"input",name:"storecode",valRef:P,label:"store code",dv:F}),Object(c.jsx)(O,{children:" edit "})]})})]}):Object(c.jsx)("div",{children:Object(c.jsx)(N,{children:Object(c.jsx)("h2",{children:" couldnt find paint "})})})},D=function(e){var t=y(),n=t.isLoading,a=t.error,i=t.sendRequest,o=t.clearError,l=Object(r.useState)(!1),j=Object(_.a)(l,2),u=j[0],p=j[1],h=function(){p(!1)},x=function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!1),t.prev=1,t.next=4,i("".concat("http://paintsaver.herokuapp.com/api","/receivedpaints/").concat(e.id),"DELETE");case 4:e.onDelete(e.id),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(g,{error:a,onClear:o}),Object(c.jsx)(f,{show:u,onCancel:h,header:"are you sure?",footer:Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(O,{onClick:h,children:"cancel"}),Object(c.jsx)(O,{onClick:x,children:"delete"})]}),children:"this cant be undone are you sure?"}),Object(c.jsx)("li",{children:Object(c.jsxs)("div",{className:"receivedpaint__card",children:[n&&Object(c.jsx)(k,{asOverlay:!0}),Object(c.jsxs)("div",{className:"receivedpaint__card-text",children:[Object(c.jsx)("div",{children:e.paintname}),Object(c.jsx)("div",{children:e.paintcode}),Object(c.jsx)("div",{children:e.paintbrand}),Object(c.jsx)("div",{children:e.base}),Object(c.jsx)("div",{children:e.storecode}),Object(c.jsx)(O,{onClick:function(){p(!0)},children:"delete"})]})]})})]})},T=(n(45),function(e){return 0===e.items.length?Object(c.jsx)("div",{children:Object(c.jsx)("h2",{children:"no paints found"})}):Object(c.jsx)("ul",{className:"paint-list",children:e.items.map((function(t){return Object(c.jsx)(D,{id:t.id,paintname:t.paintname,paintcode:t.paintcode,paintbrand:t.paintbrand,base:t.base,storecode:t.storecode,onDelete:e.onDelete},t.id)}))})}),L=function(){var e=y(),t=e.isLoading,n=e.error,a=e.sendRequest,i=e.clearError,o=Object(r.useState)(),j=Object(_.a)(o,2),u=j[0],p=j[1],O=Object(l.h)().userId;Object(r.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("".concat("http://paintsaver.herokuapp.com/api","/receivedpaints/user/").concat(O));case 3:t=e.sent,p(t.receivedpaint),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[a,O]);return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(g,{error:n,onClear:i}),t&&Object(c.jsx)("div",{className:"center",children:Object(c.jsx)(k,{})}),!t&&u&&Object(c.jsx)(T,{items:u,onDelete:function(e){p((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})},F=function(){var e=Object(r.useContext)(w),t=Object(l.g)(),n=y(),a=n.isLoading,i=n.error,o=n.sendRequest,j=n.clearError,u=Object(p.a)(),x=u.register,m=u.handleSubmit,v=function(){var n=Object(b.a)(d.a.mark((function n(a){var c,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o("http://paintsaver.herokuapp.com/api/users/email","POST",JSON.stringify({email:a.email}),{"Content-Type":"application/json"});case 3:r=n.sent,c=r.user[0].id,n.next=9;break;case 7:n.prev=7,n.t0=n.catch(0);case 9:return n.prev=9,n.next=12,o("http://paintsaver.herokuapp.com/api/sharingpaints","POST",JSON.stringify({paintname:a.paintname,paintcode:a.paintcode,paintbrand:a.paintbrand,base:a.base,storecode:a.storecode,sender:e.userId,receiver:c}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token});case 12:t.push("/"+e.userId+"/sent"),n.next=17;break;case 15:n.prev=15,n.t1=n.catch(9);case 17:case"end":return n.stop()}}),n,null,[[0,7],[9,15]])})));return function(e){return n.apply(this,arguments)}}();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(g,{error:i,onClear:j}),Object(c.jsxs)("div",{className:"sendpaint__card",children:[Object(c.jsx)("h2",{children:" send paint "}),Object(c.jsxs)("form",{onSubmit:m(v),children:[a&&Object(c.jsx)(k,{asOverlay:!0}),Object(c.jsx)(h,{name:"paintname",valRef:x,label:"name",element:"input"}),Object(c.jsx)(h,{name:"paintcode",valRef:x,label:"paint code",element:"input"}),Object(c.jsx)(h,{name:"paintbrand",valRef:x,label:"brand",element:"input"}),Object(c.jsx)(h,{name:"base",valRef:x,label:"base",element:"input"}),Object(c.jsx)(h,{name:"storecode",valRef:x,label:"store code",element:"input"}),Object(c.jsx)(h,{name:"email",valRef:x,label:"email",element:"input"}),Object(c.jsx)(O,{children:" send "})]})]})]})},q=function(e){var t=y(),n=t.isLoading,a=t.error,i=t.sendRequest,o=t.clearError,l=Object(r.useState)(!1),j=Object(_.a)(l,2),u=j[0],p=j[1],h=function(){p(!1)},x=function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!1),t.prev=1,t.next=4,i("".concat("http://paintsaver.herokuapp.com/api","/sentpaints/").concat(e.id),"DELETE");case 4:e.onDelete(e.id),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(g,{error:a,onClear:o}),Object(c.jsx)(f,{show:u,onCancel:h,header:"are you sure?",footer:Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(O,{onClick:h,children:"cancel"}),Object(c.jsx)(O,{onClick:x,children:"delete"})]}),children:"this cant be undone are you sure?"}),Object(c.jsx)("li",{children:Object(c.jsxs)("div",{className:"sentpaint__card",children:[n&&Object(c.jsx)(k,{asOverlay:!0}),Object(c.jsxs)("div",{className:"sentpaint__card-text",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:e.paintname}),Object(c.jsx)("div",{children:""===e.paintcode?null:e.paintcode}),Object(c.jsx)("div",{children:""===e.paintbrand?null:e.paintbrand}),Object(c.jsx)("div",{children:""===e.base?null:e.base}),Object(c.jsx)("div",{children:""===e.storecode?null:e.storecode})]}),Object(c.jsx)(O,{onClick:function(){p(!0)},children:"delete"})]})]})})]})},J=function(e){return 0===e.items.length?Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:" no paints found "}),Object(c.jsx)(O,{to:"sendpaints/new",children:" send paint "})]}):Object(c.jsx)("ul",{children:e.items.map((function(t){return Object(c.jsx)(q,{id:t.id,paintname:t.paintname,paintcode:t.paintcode,paintbrand:t.paintbrand,base:t.base,storecode:t.storecode,onDelete:e.onDelete},t.id)}))})},P=function(){var e=Object(r.useState)(),t=Object(_.a)(e,2),n=t[0],a=t[1],i=y(),o=i.isLoading,j=i.error,u=i.sendRequest,p=i.clearError,O=Object(l.h)().userId;Object(r.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("".concat("http://paintsaver.herokuapp.com/api","/sentpaints/user/").concat(O));case 3:t=e.sent,a(t.sentpaint),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[u,O]);return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(g,{error:j,onClear:p}),o&&Object(c.jsx)("div",{className:"center",children:Object(c.jsx)(k,{})}),!o&&n&&Object(c.jsx)(J,{items:n,onDelete:function(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})},B=function(e){return Object(c.jsx)("div",{className:"section-features",children:e.children})},A=function(){var e=Object(r.useContext)(w),t=function(){return document.getElementById("navi-toggle").click(),!1};return Object(c.jsxs)("div",{className:"navigation",children:[Object(c.jsx)("input",{type:"checkbox",className:"navigation__checkbox",id:"navi-toggle"}),Object(c.jsx)("label",{for:"navi-toggle",className:"navigation__button",children:Object(c.jsx)("span",{className:"navigation__icon"})}),Object(c.jsx)("div",{className:"navigation__background"}),Object(c.jsx)("nav",{className:"navigation__nav",children:Object(c.jsxs)("ul",{className:"navigation__list",children:[Object(c.jsx)("li",{className:"navigation__item",children:Object(c.jsx)(j.b,{to:"/".concat(e.userId,"/paints"),onClick:t,className:"navigation__link",children:"saved paint"})}),Object(c.jsx)("li",{className:"navigation__item",children:Object(c.jsx)(j.b,{to:"/paints/new",onClick:t,className:"navigation__link",children:"create paint"})}),Object(c.jsx)("li",{className:"navigation__item",children:Object(c.jsx)(j.b,{to:"/".concat(e.userId,"/sent"),onClick:t,className:"navigation__link",children:"sent paint"})}),Object(c.jsx)("li",{className:"navigation__item",children:Object(c.jsx)(j.b,{to:"/send/new",onClick:t,className:"navigation__link",children:"send paint"})}),Object(c.jsx)("li",{className:"navigation__item",children:Object(c.jsx)(j.b,{to:"/".concat(e.userId,"/received"),onClick:t,className:"navigation__link",children:"received paint"})}),Object(c.jsxs)("li",{className:"navigation__item",children:[" ",Object(c.jsx)("div",{className:"navigation__link",onClick:e.logout,children:" logout "})]})]})})]})},z=function(){var e=Object(r.useContext)(w),t=y(),n=t.isLoading,a=t.error,i=t.sendRequest,o=t.clearError,l=Object(p.a)(),u=l.register,x=l.handleSubmit,m=function(){var t=Object(b.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i("http://paintsaver.herokuapp.com/api/users/login","POST",JSON.stringify({email:n.login,password:n.password}),{"Content-Type":"application/json"});case 3:a=t.sent,e.login(a.userId,a.token),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(g,{error:a,onClear:o}),Object(c.jsx)("div",{className:"auth__card",children:Object(c.jsxs)("div",{className:"auth__card-text",children:[n&&Object(c.jsx)(k,{asOverlay:!0}),Object(c.jsxs)("div",{className:"u-margin-top-small",children:[Object(c.jsx)("h2",{children:"please login"}),Object(c.jsxs)("form",{onSubmit:x(m),children:[Object(c.jsx)(h,{name:"login",valRef:u,label:"email",element:"input"}),Object(c.jsx)(h,{name:"password",valRef:u,label:"password",element:"input",type:"password"}),Object(c.jsx)(O,{type:"submit",children:"login"})]}),"did you mean to ",Object(c.jsx)(j.b,{to:"/signup",children:" signup "})," ",Object(c.jsx)("br",{})]})]})})]})},G=function(){var e=Object(r.useContext)(w),t=Object(p.a)(),n=t.register,a=t.handleSubmit,i=y(),o=i.isLoading,l=i.error,u=i.sendRequest,x=i.clearError,m=function(){var t=Object(b.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u("http://paintsaver.herokuapp.com/api/users/signup","POST",JSON.stringify({name:n.name,email:n.email,password:n.password}),{"Content-Type":"application/json"});case 3:a=t.sent,e.login(a.userId,a.token),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(g,{error:l,onClear:x}),Object(c.jsx)("div",{className:"auth__card",children:Object(c.jsxs)("div",{className:"auth__card-text",children:[o&&Object(c.jsx)(k,{asOverylay:!0}),Object(c.jsx)("h2",{children:"signup"}),Object(c.jsxs)("form",{onSubmit:a(m),children:[Object(c.jsx)(h,{name:"name",valRef:n,label:"name",element:"input"}),Object(c.jsx)(h,{name:"email",valRef:n,label:"email",element:"input"}),Object(c.jsx)(h,{name:"password",valRef:n,label:"password",element:"input",type:"password"}),Object(c.jsx)(O,{type:"submit",children:"submit"})]}),"did you mean to ",Object(c.jsx)(j.b,{to:"/login",children:" login "})," ",Object(c.jsx)("br",{})]})})]})},H=function(){var e,t=function(){var e=Object(r.useState)(!1),t=Object(_.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(),i=Object(_.a)(s,2),o=i[0],l=i[1],j=Object(r.useState)(!1),u=Object(_.a)(j,2),d=u[0],b=u[1],p=Object(r.useCallback)((function(e,t,n){c(t),b(e);var a=n||new Date((new Date).getTime()+36e5);l(a),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:a.toISOString()}))}),[]),O=Object(r.useCallback)((function(){c(null),l(null),b(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(n&&o){var e=o.getTime()-(new Date).getTime();a=setTimeout(O,e)}else clearTimeout(a)}),[n,O,o]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&p(e.userId,e.token,new Date(e.expiration))}),[p]),{token:n,login:p,logout:O,userId:d}}(),n=t.token,s=t.login,i=t.logout,o=t.userId;return e=n?Object(c.jsxs)(l.d,{children:[Object(c.jsxs)(l.b,{path:"/:userId/paints",children:[Object(c.jsx)(A,{}),Object(c.jsx)(R,{})]}),Object(c.jsxs)(l.b,{path:"/paints/new",children:[Object(c.jsx)(A,{}),Object(c.jsx)(C,{})]}),Object(c.jsxs)(l.b,{path:"/paints/:paintId",children:[Object(c.jsx)(A,{}),Object(c.jsx)(I,{})]}),Object(c.jsxs)(l.b,{path:"/send/new",children:[Object(c.jsx)(A,{}),Object(c.jsx)(F,{})]}),Object(c.jsxs)(l.b,{path:"/:userId/sent",children:[Object(c.jsx)(A,{}),Object(c.jsx)(P,{})]}),Object(c.jsxs)(l.b,{path:"/:userId/received",children:[Object(c.jsx)(A,{}),Object(c.jsx)(L,{})]}),Object(c.jsx)(l.a,{to:"/paints/new"})]}):Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{path:"/auth",children:Object(c.jsx)(z,{})}),Object(c.jsx)(l.b,{path:"/signup",children:Object(c.jsx)(G,{})}),Object(c.jsx)(l.a,{to:"/auth"})]}),Object(c.jsx)(w.Provider,{value:{isLoggedIn:!!n,token:n,userId:o,login:s,logout:i},children:Object(c.jsx)(j.a,{children:Object(c.jsx)(B,{children:e})})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(H,{})}),document.getElementById("root")),M()}},[[46,1,2]]]);
//# sourceMappingURL=main.5724d04f.chunk.js.map